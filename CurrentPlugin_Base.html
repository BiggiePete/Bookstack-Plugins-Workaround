<script>
    function FixText() {
        try {
            var cont = document.getElementsByClassName("page-content clearfix");
            var litags = cont[0].children[0].querySelectorAll("li");
            const combos = ['0th', '1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th'];
            const replacement = ["0<sup>th</sup>", "1<sup>st</sup>", "2<sup>nd</sup>", "3<sup>rd</sup>", "4<sup>th</sup>", "5<sup>th</sup>", "6<sup>th</sup>", "7<sup>th</sup>", "8<sup>th</sup>", "9<sup>th</sup>"];
            /*
            Search for all p tags, and look through inner html until you see x(th/st/nd) then
            Using that store all of the text in the p tag, and replace it using x <sup>(th/st/nd)</sup>
            
            Current PROBLEM : 
            any text stored within a list, be it any ul then li tag, is not evaluated, and not handled
            */
            var Ptags = cont[0].children[0].querySelectorAll("p");
            // now since we have all of the p tags, we can try to parse out the text
            for (let i = 0; i < Ptags.length; i++) {
                for (let j = 0; j < combos.length; j++) {
                    Ptags[i].innerHTML = Ptags[i].innerHTML.replace(combos[j], replacement[j]);
                }
            }
            for (let k = 0; k < litags.length; k++) {
                for (let l = 0; l < combos.length; l++) {
                    litags[k].innerHTML = litags[k].innerHTML.replace(combos[l], replacement[l]);
                }
            }
        }
        catch {
            console.log('oh no');
        }
    }

    function UpdatePage() {
        FixText();
        PrepareTags();
        AddPreview();
    }
    function OpenUrl(url) {
        window.open(url, '_blank');
    }
    function PrepareTags() {
        try {
            var cont = document.getElementsByClassName("page-content clearfix")
            var Atags = cont[0].children[0].querySelectorAll("a")
            for (let i = 0; i < Atags.length; i++) {
                if (Atags[i].href.endsWith(".png") || Atags[i].href.endsWith(".jpg") ||
                    Atags[i].href.endsWith(".jpeg") || Atags[i].href.endsWith(".webm") ||
                    Atags[i].href.endsWith(".gif") || Atags[i].href.endsWith(".svg")) {
                    var Preserve = Atags[i].href;
                    try {
                        var W = Atags[i].children[0].width;
                        var H = Atags[i].children[0].height;
                    }
                    catch {
                        console.log("There seems to be no height and width data")
                    }
                    Atags[i].insertAdjacentHTML('afterend', "<img class='Fixed-Image-' src=" + Preserve + " onclick='OpenUrl(" + '"' + Preserve + '"' + ");' Width = " + W + "  Height = " + H + ">");
                    Atags[i].remove();
                }
            }
            var Imgs = cont[0].children[0].querySelectorAll("img");
            for (let j = 0; j < Imgs.length; j++) {
                Imgs[j].style.cursor = "pointer";
            }
        }
        catch { console.log("lmao this aint it") }
    }
    function AddPreview() {
        try {
            var cont = document.getElementsByClassName("page-content clearfix")
            var Atags = cont[0].children[0].querySelectorAll("a")
            for (let i = 0; i < Atags.length; i++) {
                var link = Atags[i].href;
                Atags[i].className = "intext";
                Atags[i].insertAdjacentHTML('afterend', "<div class='previewbox'><iframe src=" + link + " width=100%; height=500px></iframe></div><style>.previewbox{display: none;width: 100%;}a.intext:hover + .previewbox,.previewbox:hover{display: block;position: relative;z-index: 100;margin-top:-5px;}</style>");
            }
        }
        catch { console.log("Looks like there are no a tags to fix here") }
    }
    window.onload = (event) => { UpdatePage(); };
</script>

<style>
    ::-webkit-scrollbar {
        width: 5px;
    }

    img .Fixed-Image- :hover {
        cursor: pointer;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #c3c3c3;
        border-radius: 7px;
    }
</style>
